Name: stb-tester
Version: @VERSION@
Release: 1%{?dist}
Summary: Automated user interface testing for set-top boxes
Group: Development/Tools
URL: http://stb-tester.com
License: LGPLv2.1+
Source: %{name}-%{version}.tar.gz
BuildArch: noarch
BuildRequires: python-docutils

Requires: curl
Requires: gstreamer1
Requires: gstreamer1-plugins-bad-free
Requires: gstreamer1-plugins-base
Requires: gstreamer1-plugins-good
Requires: python-gstreamer1
Requires: opencv
Requires: opencv-python
Requires: openssh-clients
Requires: pygtk2
Requires: pylint
Requires: python >= 2.7
Requires: python-jinja2
Requires: tesseract

%description
stb-tester tests a set-top-box by issuing commands to it using a remote-control
and checking that it has done the right thing by analysing what is on screen.
Test scripts are written in Python and can be generated with the `stbt record`
command.

%package camera
Summary: stb-tester camera support
Requires: gstreamer1-libav
%description camera
Support for using a camera pointed at a TV as input for stb-tester.  This is
useful for testing apps running on Smart TVs.

%prep
%setup

%build
make @MAKEOVERRIDES@

%install
make install @MAKEOVERRIDES@ DESTDIR=${RPM_BUILD_ROOT}

%files
%defattr(-,root,root,-)

@BINDIR@/stbt
@BINDIR@/irnetbox-proxy
@LIBEXECDIR@/stbt
@MAN1DIR@
@SYSCONFDIR@/stbt
@SYSCONFDIR@/bash_completion.d/stbt

%files camera
@LIBEXECDIR@/stbt/stbt-camera
